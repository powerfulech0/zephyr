# Production Environment Configuration Template
# ============================================
# IMPORTANT: This is a template file. Do NOT commit actual production secrets to version control!
# Copy this file and fill in actual values, then store in secure secret management system.
#
# Recommended Secret Management:
# - AWS: Use AWS Secrets Manager or Parameter Store
# - GCP: Use Google Secret Manager
# - Azure: Use Azure Key Vault
# - On-premises: Use HashiCorp Vault
# - Kubernetes: Use Sealed Secrets or External Secrets Operator

# ============================================
# Server Configuration
# ============================================
NODE_ENV=production
PORT=4000
LOG_LEVEL=info

# ============================================
# Database Configuration (PostgreSQL)
# ============================================
# Replace with actual production database endpoint
DB_HOST=<RDS_ENDPOINT or postgres.example.com>
DB_PORT=5432
DB_NAME=zephyr_production
DB_USER=<DB_USERNAME>
DB_PASSWORD=<RETRIEVE_FROM_SECRETS_MANAGER>
DB_POOL_MAX=20
DB_QUERY_TIMEOUT=2000

# ============================================
# Redis Configuration
# ============================================
# Replace with actual production Redis endpoint
REDIS_HOST=<ELASTICACHE_ENDPOINT or redis.example.com>
REDIS_PORT=6379
REDIS_PASSWORD=<RETRIEVE_FROM_SECRETS_MANAGER>
REDIS_TIMEOUT=1000

# ============================================
# CORS Configuration
# ============================================
# Comma-separated list of allowed origins (NO wildcards in production!)
ALLOWED_ORIGINS=https://app.zephyr.example.com,https://www.zephyr.example.com

# ============================================
# Rate Limiting
# ============================================
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX=100            # 100 requests per window

# ============================================
# Data Retention
# ============================================
POLL_RETENTION_DAYS=30
AUDIT_LOG_RETENTION_DAYS=90

# ============================================
# Secret Management
# ============================================
# Backend: env (not recommended for prod), vault, aws
SECRET_BACKEND=aws

# AWS Secrets Manager (if using SECRET_BACKEND=aws)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=<IAM_ACCESS_KEY or use IAM role>
AWS_SECRET_ACCESS_KEY=<IAM_SECRET_KEY or use IAM role>

# HashiCorp Vault (if using SECRET_BACKEND=vault)
# VAULT_ADDR=https://vault.example.com:8200
# VAULT_TOKEN=<VAULT_TOKEN or use AppRole>

# ============================================
# Host Authentication (Optional)
# ============================================
HOST_AUTH_ENABLED=true
HOST_AUTH_SECRET=<RETRIEVE_FROM_SECRETS_MANAGER - min 32 characters>

# ============================================
# Feature Flags
# ============================================
ENABLE_METRICS=true
ENABLE_AUDIT_LOGGING=true

# ============================================
# Monitoring & Observability
# ============================================
# Application Insights / DataDog / New Relic API keys
# DATADOG_API_KEY=<RETRIEVE_FROM_SECRETS_MANAGER>
# NEW_RELIC_LICENSE_KEY=<RETRIEVE_FROM_SECRETS_MANAGER>

# ============================================
# SSL/TLS Configuration (if terminating SSL at app level)
# ============================================
# SSL_CERT_PATH=/etc/ssl/certs/zephyr.crt
# SSL_KEY_PATH=/etc/ssl/private/zephyr.key

# ============================================
# Production Optimization
# ============================================
# Node.js production optimizations
NODE_OPTIONS=--max-old-space-size=2048

# ============================================
# Security Notes
# ============================================
# 1. NEVER commit this file with real credentials
# 2. Use AWS Secrets Manager, Vault, or similar for secrets
# 3. Rotate credentials regularly (every 90 days minimum)
# 4. Use IAM roles instead of access keys when possible
# 5. Enable encryption at rest for database and Redis
# 6. Use VPC security groups to restrict network access
# 7. Enable CloudWatch/Prometheus monitoring and alerting
# 8. Set up automated backups with point-in-time recovery
